<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa de Publicações</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-choropleth@1.0.0/leaflet-choropleth.js"></script>
    <style>
        /* Certifique-se de que o mapa ocupe 100% da altura e largura da tela */
        html,
        body {
            height: 100%;
            margin: 0;
        }

        #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        var map = L.map('map').setView([0, 0], 2); // Centralizar no mapa-múndi

        // Adicionando o Mapbox como fundo
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        // Dados de publicações por país
        var dadosDePublicacoes = {
            "South Georgia": "0",
            "Grenada": "1",
            "Switzerland": "6",
            "Sierra Leone": "0",
            "Hungary": "0",
            "Taiwan": "4",
            "Wallis and Futuna": "0",
            "Barbados": "0",
            "Pitcairn Islands": "0",
            "Ivory Coast": "0",
            "Tunisia": "2",
            "Italy": "29",
            "Benin": "0",
            "Indonesia": "4",
            "Cape Verde": "0",
            "Saint Kitts and Nevis": "0",
            "Laos": "0",
            "Caribbean Netherlands": "0",
            "Uganda": "1",
            "Andorra": "0",
            "Burundi": "0",
            "South Africa": "11",
            "France": "27",
            "Libya": "0",
            "Mexico": "2",
            "Gabon": "0",
            "Northern Mariana Islands": "0",
            "North Macedonia": "0",
            "China": "37",
            "Yemen": "0",
            "Saint Barthélemy": "0",
            "Guernsey": "0",
            "Solomon Islands": "0",
            "Svalbard and Jan Mayen": "0",
            "Faroe Islands": "0",
            "Uzbekistan": "0",
            "Egypt": "8",
            "Senegal": "0",
            "Sri Lanka": "7",
            "Palestine": "0",
            "Bangladesh": "0",
            "Peru": "5",
            "Singapore": "4",
            "Turkey": "16",
            "Afghanistan": "0",
            "Aruba": "0",
            "Cook Islands": "0",
            "United Kingdom": "12",
            "Zambia": "0",
            "Finland": "3",
            "Niger": "2",
            "Christmas Island": "0",
            "Tokelau": "0",
            "Guinea-Bissau": "0",
            "Azerbaijan": "0",
            "Réunion": "0",
            "Djibouti": "0",
            "North Korea": "0",
            "Mauritius": "0",
            "Montserrat": "0",
            "United States Virgin Islands": "0",
            "Colombia": "0",
            "Greece": "2",
            "Croatia": "1",
            "Morocco": "3",
            "Algeria": "1",
            "Antarctica": "0",
            "Netherlands": "15",
            "Sudan": "1",
            "Fiji": "1",
            "Liechtenstein": "0",
            "Nepal": "1",
            "Puerto Rico": "1",
            "Georgia": "10",
            "Pakistan": "1",
            "Monaco": "0",
            "Botswana": "1",
            "Lebanon": "1",
            "Papua New Guinea": "0",
            "Mayotte": "0",
            "Dominican Republic": "0",
            "Norfolk Island": "0",
            "Bouvet Island": "0",
            "Qatar": "0",
            "Madagascar": "0",
            "India": "22",
            "Syria": "1",
            "Montenegro": "0",
            "Eswatini": "0",
            "Paraguay": "3",
            "El Salvador": "0",
            "Ukraine": "0",
            "Isle of Man": "0",
            "Namibia": "0",
            "United Arab Emirates": "0",
            "Bulgaria": "0",
            "Greenland": "0",
            "Germany": "24",
            "Cambodia": "0",
            "Iraq": "4",
            "French Southern and Antarctic Lands": "0",
            "Sweden": "1",
            "Cuba": "0",
            "Kyrgyzstan": "0",
            "Russia": "0",
            "Malaysia": "12",
            "São Tomé and Príncipe": "0",
            "Cyprus": "1",
            "Canada": "17",
            "Malawi": "0",
            "Saudi Arabia": "6",
            "Bosnia and Herzegovina": "0",
            "Ethiopia": "0",
            "Spain": "14",
            "Slovenia": "0",
            "Oman": "0",
            "Saint Pierre and Miquelon": "0",
            "Macau": "0",
            "San Marino": "0",
            "Lesotho": "0",
            "Marshall Islands": "0",
            "Sint Maarten": "0",
            "Iceland": "0",
            "Luxembourg": "1",
            "Argentina": "6",
            "Turks and Caicos Islands": "0",
            "Nauru": "0",
            "Cocos (Keeling) Islands": "0",
            "Western Sahara": "0",
            "Dominica": "0",
            "Costa Rica": "2",
            "Australia": "28",
            "Thailand": "12",
            "Haiti": "0",
            "Tuvalu": "0",
            "Honduras": "0",
            "Equatorial Guinea": "0",
            "Saint Lucia": "0",
            "French Polynesia": "0",
            "Belarus": "0",
            "Latvia": "0",
            "Palau": "0",
            "Guadeloupe": "0",
            "Philippines": "0",
            "Gibraltar": "0",
            "Denmark": "2",
            "Cameroon": "0",
            "Guinea": "0",
            "Bahrain": "0",
            "Suriname": "0",
            "DR Congo": "0",
            "Somalia": "0",
            "Czechia": "2",
            "New Caledonia": "0",
            "Vanuatu": "0",
            "Saint Helena, Ascension and Tristan da Cunha": "0",
            "Togo": "0",
            "British Virgin Islands": "0",
            "Kenya": "1",
            "Niue": "0",
            "Heard Island and McDonald Islands": "0",
            "Rwanda": "7",
            "Estonia": "1",
            "Romania": "0",
            "Trinidad and Tobago": "0",
            "Guyana": "0",
            "Timor-Leste": "0",
            "Vietnam": "3",
            "Uruguay": "0",
            "Vatican City": "0",
            "Hong Kong": "11",
            "Austria": "6",
            "Antigua and Barbuda": "0",
            "Turkmenistan": "0",
            "Mozambique": "0",
            "Panama": "0",
            "Micronesia": "0",
            "Ireland": "2",
            "Curaçao": "0",
            "French Guiana": "0",
            "Norway": "2",
            "Åland Islands": "0",
            "Central African Republic": "0",
            "Burkina Faso": "0",
            "Eritrea": "0",
            "Tanzania": "0",
            "South Korea": "2",
            "Jordan": "1",
            "Mauritania": "0",
            "Lithuania": "2",
            "United States Minor Outlying Islands": "0",
            "Slovakia": "2",
            "Angola": "0",
            "Kazakhstan": "0",
            "Moldova": "0",
            "Mali": "0",
            "Falkland Islands": "0",
            "Armenia": "0",
            "Samoa": "0",
            "Jersey": "2",
            "Japan": "7",
            "Bolivia": "0",
            "Chile": "5",
            "United States": "42",
            "Saint Vincent and the Grenadines": "0",
            "Bermuda": "0",
            "Seychelles": "0",
            "British Indian Ocean Territory": "0",
            "Guatemala": "0",
            "Ecuador": "1",
            "Martinique": "0",
            "Tajikistan": "0",
            "Malta": "0",
            "Gambia": "0",
            "Nigeria": "6",
            "Bahamas": "0",
            "Kosovo": "4",
            "Kuwait": "1",
            "Maldives": "0",
            "South Sudan": "0",
            "Iran": "7",
            "Albania": "0",
            "Brazil": "41",
            "Serbia": "0",
            "Belize": "0",
            "Myanmar": "0",
            "Bhutan": "0",
            "Venezuela": "0",
            "Liberia": "0",
            "Jamaica": "0",
            "Poland": "3",
            "Cayman Islands": "0",
            "Brunei": "0",
            "Comoros": "0",
            "Guam": "0",
            "Tonga": "0",
            "Kiribati": "0",
            "Ghana": "5",
            "Chad": "0",
            "Zimbabwe": "0",
            "Saint Martin": "0",
            "Mongolia": "0",
            "Portugal": "3",
            "American Samoa": "0",
            "Republic of the Congo": "2",
            "Belgium": "16",
            "Israel": "8",
            "New Zealand": "2",
            "Nicaragua": "0",
            "Anguilla": "0"
        };

        // Carregar os dados GeoJSON
        fetch('https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json')
            .then(response => response.json())
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        const countryName = feature.properties.name;
                        const pubCount = dadosDePublicacoes[countryName] || 0;
                        const maxPub = 37; // Máximo de publicações para ajustar o gradiente de cor

                        // Definir o valor de cor RGB de acordo com o número de publicações
                        const red = Math.min(255, pubCount * 5);
                        const green = Math.min(255, pubCount * 2);
                        const blue = Math.max(0, 255 - pubCount * 3);

                        // Ajuste das cores RGB
                        return {
                            fillColor: pubCount > 0 ? `rgb(${red}, ${green}, ${blue})` : '#ccc',
                            weight: 1,
                            opacity: 1,
                            color: 'white',
                            dashArray: '3',
                            fillOpacity: 0.7
                        };
                    },
                    onEachFeature: function (feature, layer) {
                        const countryName = feature.properties.name;
                        const pubCount = dadosDePublicacoes[countryName] || 0;
                        // Exibir o número de publicações no popup ao clicar no país
                        layer.bindPopup(`${countryName}: ${pubCount} publicações`);
                    }
                }).addTo(map);
            });
        const ranking = Object.entries(dadosDePublicacoes)
            .map(([pais, publicacoes]) => ({
                pais: pais,
                publicacoes: parseInt(publicacoes)
            }))
            .sort((a, b) => b.publicacoes - a.publicacoes) // Ordena de forma decrescente
            .slice(0, 5); // Seleciona os 5 primeiros

        // Exibir os 5 melhores
        console.log('Ranking dos 5 países com mais publicações:');
        ranking.forEach((item, index) => {
            console.log(`#${index + 1}: ${item.pais} - ${item.publicacoes} publicações`);
        });
    </script>
</body>

</html>